(function(b){b.fn.dice=function(a){var d=this,a=b.extend({background:"#ffffff",callback:null,glyphSize:40,glyphSrc:"dice.gif",juggleTimeout:300,number:1,selectGlyph:function(a){var c;switch(a){default:case 1:c=a=0;break;case 2:a=80;c=0;break;case 3:a=40;c=0;break;case 4:c=a=40;break;case 5:a=80;c=40;break;case 6:a=0,c=40}b(d).css("backgroundPosition",a+"px "+c+"px")}},a);b(this).css({background:a.background+" url("+a.glyphSrc+")",height:a.glyphSize,width:a.glyphSize});b(this).click(function(){b.when(b.Deferred(function(e){var c=
b(d).css("z-index");b(d).css("z-index",1).animate({"z-index":a.juggleTimeout},{step:function(){a.selectGlyph(Math.floor(Math.random()*2011)%6+1)},duration:a.juggleTimeout,complete:e.resolve}).css("z-index",c);return e.promise()})).done(function(){a.number=Math.floor(Math.random()*2011)%6+1;b(this).stop();a.selectGlyph(a.number);a.callback&&typeof a.callback==="function"&&a.callback(a.number)})});b(this).click()}})(jQuery);
